(this.webpackJsonprestaurantmanager=this.webpackJsonprestaurantmanager||[]).push([[0],{46:function(e,t,a){},76:function(e,t,a){},77:function(e,t,a){"use strict";a.r(t);var s=a(0),n=a(22),r=a.n(n),c=(a(46),a(9)),o=a(10),i=a(12),l=a(11),d=a(4),h=a(3),j=a(23),u=a(20),b=a.n(u),p=function(e){e?b.a.defaults.headers.common.Authorization=e:delete b.a.defaults.headers.common.Authorization},m="GET_ERRORS",O="USER_LOADING",x="SET_CURRENT_USER",v=function(e){return{type:x,payload:e}},g=function(){return function(e){localStorage.removeItem("jwtToken"),p(!1),e(v({}))}},f=a(14),w=a(15),y=a(40),N=a(16),k=a(71),S={isAuthenticated:!1,user:{},loading:!1},C={},R=Object(w.c)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case x:return Object(N.a)(Object(N.a)({},e),{},{isAuthenticated:!k(t.payload),user:t.payload});case O:return Object(N.a)(Object(N.a)({},e),{},{loading:!0});default:return e}},errors:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case m:return t.payload;default:return e}}}),E=[y.a],_=Object(w.e)(R,{},Object(w.d)(w.a.apply(void 0,E),window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__()||w.d)),T=a(1),A=function(e){Object(i.a)(a,e);var t=Object(l.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return Object(T.jsx)("div",{className:"navbar-fixed",children:Object(T.jsx)("nav",{className:"z-depth-0",children:Object(T.jsx)("div",{className:"nav-wrapper white",children:Object(T.jsxs)(d.b,{to:"/",style:{fontFamily:"monospace"},className:"col s5 brand-logo center black-text",children:[Object(T.jsx)("i",{className:"material-icons",children:"code"}),"Barns Link"]})})})})}}]),a}(s.Component),L=function(e){Object(i.a)(a,e);var t=Object(l.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return Object(T.jsx)("div",{style:{height:"75vh"},className:"container valign-wrapper",children:Object(T.jsx)("div",{className:"row",children:Object(T.jsxs)("div",{className:"col s12 center-align",children:[Object(T.jsx)("h4",{children:Object(T.jsx)("b",{children:"Automate your restaurant business with us "})}),Object(T.jsx)("p",{className:"flow-text grey-text text-darken-1",children:"A full-stack app created by the Fabulous Five from NYIT"}),Object(T.jsx)("br",{}),Object(T.jsx)("div",{className:"col s6",children:Object(T.jsx)(d.b,{to:"/register",style:{width:"140px",borderRadius:"3px",letterSpacing:"1.5px"},className:"btn btn-large waves-effect waves-light hoverable blue accent-3",children:"Register"})}),Object(T.jsx)("div",{className:"col s6",children:Object(T.jsx)(d.b,{to:"/login",style:{width:"140px",borderRadius:"3px",letterSpacing:"1.5px"},className:"btn btn-large waves-effect waves-light hoverable blue accent-3",children:"Log In"})})]})})})}}]),a}(s.Component),U=a(19),D=a(17),P=a.n(D),F=function(e){Object(i.a)(a,e);var t=Object(l.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).onChange=function(t){e.setState(Object(U.a)({},t.target.id,t.target.value))},e.onSubmit=function(t){t.preventDefault();var a={Username:e.state.name,Email:e.state.email,Password:e.state.password,PasswordConfirmation:e.state.password2};e.props.registerUser(a,e.props.history)},e.state={name:"",email:"",password:"",password2:"",errors:{}},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.props.auth.isAuthenticated&&this.props.history.push("/dashboard")}},{key:"componentWillReceiveProps",value:function(e){e.errors&&this.setState({errors:e.errors})}},{key:"render",value:function(){var e=this.state.errors;return console.log(this.state.errors.status),Object(T.jsx)("div",{className:"container",children:Object(T.jsx)("div",{className:"row",children:Object(T.jsxs)("div",{className:"col s8 offset-s2",children:[Object(T.jsxs)(d.b,{to:"/",className:"btn-flat waves-effect",children:[Object(T.jsx)("i",{className:"material-icons left",children:"keyboard_backspace"})," Back to home"]}),Object(T.jsxs)("div",{className:"col s12",style:{paddingLeft:"11.250px"},children:[Object(T.jsxs)("h4",{children:[Object(T.jsx)("b",{children:"Register"})," below"]}),Object(T.jsxs)("p",{className:"grey-text text-darken-1",children:["Already have an account? ",Object(T.jsx)(d.b,{to:"/login",children:"Log in"})]})]}),Object(T.jsxs)("form",{noValidate:!0,onSubmit:this.onSubmit,children:[Object(T.jsxs)("p",{className:"red-text col s12",children:["  ",this.state.errors.status]}),Object(T.jsxs)("div",{className:"input-field col s12",children:[Object(T.jsx)("input",{onChange:this.onChange,value:this.state.name,error:e.name,id:"name",type:"text",className:P()("",{invalid:e.name})}),Object(T.jsx)("label",{htmlFor:"name",children:"Name"}),Object(T.jsx)("span",{className:"red-text",children:e.name})]}),Object(T.jsxs)("div",{className:"input-field col s12",children:[Object(T.jsx)("input",{onChange:this.onChange,value:this.state.email,error:e.email,id:"email",type:"email",className:P()("",{invalid:e.email})}),Object(T.jsx)("label",{htmlFor:"email",children:"Email"}),Object(T.jsx)("span",{className:"red-text",children:e.email})]}),Object(T.jsxs)("div",{className:"input-field col s12",children:[Object(T.jsx)("input",{onChange:this.onChange,value:this.state.password,error:e.password,id:"password",type:"password",className:P()("",{invalid:e.password})}),Object(T.jsx)("label",{htmlFor:"password",children:"Password"}),Object(T.jsx)("span",{className:"red-text",children:e.password})]}),Object(T.jsxs)("div",{className:"input-field col s12",children:[Object(T.jsx)("input",{onChange:this.onChange,value:this.state.password2,error:e.password2,id:"password2",type:"password",className:P()("",{invalid:e.password2})}),Object(T.jsx)("label",{htmlFor:"password2",children:"Confirm Password"}),Object(T.jsx)("span",{className:"red-text",children:e.password2})]}),Object(T.jsx)("div",{className:"col s12",style:{paddingLeft:"11.250px"},children:Object(T.jsx)("button",{style:{width:"150px",borderRadius:"3px",letterSpacing:"1.5px",marginTop:"1rem"},type:"submit",className:"btn btn-large waves-effect waves-light hoverable blue accent-3",children:"Sign up"})})]})]})})})}}]),a}(s.Component),I=Object(f.b)((function(e){return{auth:e.auth,errors:e.errors}}),{registerUser:function(e,t){return function(a){b.a.post("http://localhost:5000/api/Account/register",e).then((function(e){return t.push("/login")})).catch((function(e){return a({type:m,payload:e.response.data})}))}}})(Object(h.g)(F)),M=function(e){Object(i.a)(a,e);var t=Object(l.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).onChange=function(t){e.setState(Object(U.a)({},t.target.id,t.target.value))},e.onSubmit=function(t){t.preventDefault();var a={Username:e.state.name,Email:e.state.email,Password:e.state.password};e.props.loginUser(a)},e.state={email:"",password:"",errors:{}},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){console.log(this.props.auth),this.props.auth.isAuthenticated&&(console.log(this.props.auth.user),"Manager"==this.props.auth.user.accountType?console.log("Role type is manager"):console.log("not a manager!"),this.props.history.push("/dashboard"))}},{key:"componentWillReceiveProps",value:function(e){e.auth.isAuthenticated&&(console.log(this.props.auth.user),"Manager"==this.props.auth.user.accountType?console.log("Role type is manager"):console.log("not a manager!"),this.props.history.push("/dashboard")),e.errors&&this.setState({errors:e.errors})}},{key:"render",value:function(){var e=this.state.errors;return console.log(this.state.errors.status),Object(T.jsx)("div",{className:"container",children:Object(T.jsx)("div",{style:{marginTop:"4rem"},className:"row",children:Object(T.jsxs)("div",{className:"col s8 offset-s2",children:[Object(T.jsxs)(d.b,{to:"/",className:"btn-flat waves-effect",children:[Object(T.jsx)("i",{className:"material-icons left",children:"keyboard_backspace"})," Back to home"]}),Object(T.jsxs)("div",{className:"col s12",style:{paddingLeft:"11.250px"},children:[Object(T.jsxs)("h4",{children:[Object(T.jsx)("b",{children:"Login"})," below"]}),Object(T.jsxs)("p",{className:"grey-text text-darken-1",children:["Don't have an account? ",Object(T.jsx)(d.b,{to:"/register",children:"Register"})]})]}),Object(T.jsxs)("form",{noValidate:!0,onSubmit:this.onSubmit,children:[Object(T.jsxs)("p",{className:"red-text text-darken-1 col s12",children:[" ",this.state.errors.status]}),Object(T.jsxs)("div",{className:"input-field col s12",children:[Object(T.jsx)("input",{onChange:this.onChange,value:this.state.email,error:e.email,id:"email",type:"email",className:P()("",{invalid:e.email||e.emailnotfound})}),Object(T.jsxs)("span",{className:"red-text",children:[e.email,e.emailnotfound]})]}),Object(T.jsxs)("div",{className:"input-field col s12",children:[Object(T.jsx)("input",{onChange:this.onChange,value:this.state.password,error:e.password,id:"password",type:"password",className:P()("",{invalid:e.password||e.passwordincorrect})}),Object(T.jsx)("label",{htmlFor:"password",children:"Password"}),Object(T.jsxs)("span",{className:"red-text",children:[e.password,e.passwordincorrect]})]}),Object(T.jsx)("div",{className:"col s12",style:{paddingLeft:"11.250px"},children:Object(T.jsx)("button",{style:{width:"150px",borderRadius:"3px",letterSpacing:"1.5px",marginTop:"1rem"},type:"submit",className:"btn btn-large waves-effect waves-light hoverable blue accent-3",children:"Login"})})]})]})})})}}]),a}(s.Component),B=Object(f.b)((function(e){return{auth:e.auth,errors:e.errors}}),{loginUser:function(e){return function(t){b.a.post("http://localhost:5000/api/Account/login",e).then((function(e){var a=e.data.token;localStorage.setItem("jwtToken",a),p(a);var s=Object(j.a)(a);t(v(s))})).catch((function(e){return t({type:m,payload:e.response.data})}))}}})(M),V=a(41),W=Object(f.b)((function(e){return{auth:e.auth}}))((function(e){var t=e.component,a=e.auth,s=Object(V.a)(e,["component","auth"]);return Object(T.jsx)(h.b,Object(N.a)(Object(N.a)({},s),{},{render:function(e){return!0===a.isAuthenticated?Object(T.jsx)(t,Object(N.a)({},e)):Object(T.jsx)(h.a,{to:"/login"})}}))})),X=function(e){Object(i.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(c.a)(this,a);for(var s=arguments.length,n=new Array(s),r=0;r<s;r++)n[r]=arguments[r];return(e=t.call.apply(t,[this].concat(n))).onLogoutClick=function(t){t.preventDefault(),e.props.logoutUser()},e}return Object(o.a)(a,[{key:"render",value:function(){var e=this.props.auth.user;return console.log(e),Object(T.jsx)("div",{style:{height:"75vh"},className:"container valign-wrapper",children:Object(T.jsx)("div",{className:"row",children:Object(T.jsxs)("div",{className:"landing-copy col s12 center-align",children:[Object(T.jsxs)("h4",{children:[Object(T.jsx)("b",{children:"Hey there,"})," ",e.name.split(" ")[0],Object(T.jsxs)("p",{className:"flow-text grey-text text-darken-1",children:["Restaurant Automation Management Hub"," ",Object(T.jsx)("span",{style:{fontFamily:"monospace"},children:"Barns"})," Link \ud83d\udc4f"]})]}),Object(T.jsx)("button",{style:{width:"150px",borderRadius:"3px",letterSpacing:"1.5px",marginTop:"1rem"},onClick:this.onLogoutClick,className:"btn btn-large waves-effect waves-light hoverable blue accent-3",children:"Logout"})]})})})}}]),a}(s.Component),z=Object(f.b)((function(e){return{auth:e.auth}}),{logoutUser:g})(X);a(76);if(localStorage.jwtToken){var G=localStorage.jwtToken;p(G);var H=Object(j.a)(G);_.dispatch(v(H));var J=Date.now()/1e3;H.exp<J&&(_.dispatch(g()),window.location.href="./login")}var Y=function(e){Object(i.a)(a,e);var t=Object(l.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return Object(T.jsx)(f.a,{store:_,children:Object(T.jsx)(d.a,{children:Object(T.jsxs)("div",{className:"App",children:[Object(T.jsx)(A,{}),Object(T.jsx)(h.b,{exact:!0,path:"/",component:L}),Object(T.jsx)(h.b,{exact:!0,path:"/register",component:I}),Object(T.jsx)(h.b,{exact:!0,path:"/login",component:B}),Object(T.jsx)(h.d,{children:Object(T.jsx)(W,{exact:!0,path:"/dashboard",component:z})})]})})})}}]),a}(s.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(Object(T.jsx)(Y,{}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[77,1,2]]]);
//# sourceMappingURL=main.b02f1ef0.chunk.js.map